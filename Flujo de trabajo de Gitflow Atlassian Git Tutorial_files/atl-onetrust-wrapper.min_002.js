"use strict";(()=>{var Yr=Object.create;var St=Object.defineProperty;var Kr=Object.getOwnPropertyDescriptor;var zr=Object.getOwnPropertyNames;var Xr=Object.getPrototypeOf,Qr=Object.prototype.hasOwnProperty;var Y=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports);var qr=(n,r,e,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of zr(r))!Qr.call(n,a)&&a!==e&&St(n,a,{get:()=>r[a],enumerable:!(t=Kr(r,a))||t.enumerable});return n};var ie=(n,r,e)=>(e=n!=null?Yr(Xr(n)):{},qr(r||!n||!n.__esModule?St(e,"default",{value:n,enumerable:!0}):e,n));var he=Y((da,qt)=>{"use strict";qt.exports=function(n,r){r||(r={}),typeof r=="function"&&(r={cmp:r});var e=typeof r.cycles=="boolean"?r.cycles:!1,t=r.cmp&&function(i){return function(o){return function(l,d){var f={key:l,value:o[l]},v={key:d,value:o[d]};return i(f,v)}}}(r.cmp),a=[];return function i(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var l,d;if(Array.isArray(o)){for(d="[",l=0;l<o.length;l++)l&&(d+=","),d+=i(o[l])||"null";return d+"]"}if(o===null)return"null";if(a.indexOf(o)!==-1){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var f=a.push(o)-1,v=Object.keys(o).sort(t&&t(o));for(d="",l=0;l<v.length;l++){var T=v[l],I=i(o[T]);I&&(d&&(d+=","),d+=JSON.stringify(T)+":"+I)}return a.splice(f,1),"{"+d+"}"}}(n)}});var sr=Y((Ji,$e)=>{var or=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);or?(Qe=new Uint8Array(16),$e.exports=function(){return or(Qe),Qe}):(qe=new Array(16),$e.exports=function(){for(var r=0,e;r<16;r++)r&3||(e=Math.random()*4294967296),qe[r]=e>>>((r&3)<<3)&255;return qe});var Qe,qe});var cr=Y((Bi,ur)=>{var lr=[];for(Te=0;Te<256;++Te)lr[Te]=(Te+256).toString(16).substr(1);var Te;function Rn(n,r){var e=r||0,t=lr;return[t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],"-",t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]],t[n[e++]]].join("")}ur.exports=Rn});var fr=Y((Hi,dr)=>{var Sn=sr(),Cn=cr();function Nn(n,r,e){var t=r&&e||0;typeof n=="string"&&(r=n==="binary"?new Array(16):null,n=null),n=n||{};var a=n.random||(n.rng||Sn)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,r)for(var i=0;i<16;++i)r[t+i]=a[i];return r||Cn(a)}dr.exports=Nn});var Sr=Y((mo,D)=>{function nt(n){"@babel/helpers - typeof";return D.exports=nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},D.exports.__esModule=!0,D.exports.default=D.exports,nt(n)}D.exports=nt,D.exports.__esModule=!0,D.exports.default=D.exports});var Nr=Y((go,k)=>{var xn=Sr().default;function Cr(){"use strict";k.exports=Cr=function(){return n},k.exports.__esModule=!0,k.exports.default=k.exports;var n={},r=Object.prototype,e=r.hasOwnProperty,t=Object.defineProperty||function(c,s,u){c[s]=u.value},a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(c,s,u){return Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}),c[s]}try{d({},"")}catch{d=function(u,p,m){return u[p]=m}}function f(c,s,u,p){var m=s&&s.prototype instanceof I?s:I,h=Object.create(m.prototype),b=new Fe(p||[]);return t(h,"_invoke",{value:Br(c,u,b)}),h}function v(c,s,u){try{return{type:"normal",arg:c.call(s,u)}}catch(p){return{type:"throw",arg:p}}}n.wrap=f;var T={};function I(){}function E(){}function w(){}var re={};d(re,i,function(){return this});var ne=Object.getPrototypeOf,J=ne&&ne(ne(xe([])));J&&J!==r&&e.call(J,i)&&(re=J);var ae=w.prototype=I.prototype=Object.create(re);function Ot(c){["next","throw","return"].forEach(function(s){d(c,s,function(u){return this._invoke(s,u)})})}function Ie(c,s){function u(m,h,b,O){var _=v(c[m],c,h);if(_.type!=="throw"){var B=_.arg,W=B.value;return W&&xn(W)=="object"&&e.call(W,"__await")?s.resolve(W.__await).then(function(H){u("next",H,b,O)},function(H){u("throw",H,b,O)}):s.resolve(W).then(function(H){B.value=H,b(B)},function(H){return u("throw",H,b,O)})}O(_.arg)}var p;t(this,"_invoke",{value:function(h,b){function O(){return new s(function(_,B){u(h,b,_,B)})}return p=p?p.then(O,O):O()}})}function Br(c,s,u){var p="suspendedStart";return function(m,h){if(p==="executing")throw new Error("Generator is already running");if(p==="completed"){if(m==="throw")throw h;return Rt()}for(u.method=m,u.arg=h;;){var b=u.delegate;if(b){var O=_t(b,u);if(O){if(O===T)continue;return O}}if(u.method==="next")u.sent=u._sent=u.arg;else if(u.method==="throw"){if(p==="suspendedStart")throw p="completed",u.arg;u.dispatchException(u.arg)}else u.method==="return"&&u.abrupt("return",u.arg);p="executing";var _=v(c,s,u);if(_.type==="normal"){if(p=u.done?"completed":"suspendedYield",_.arg===T)continue;return{value:_.arg,done:u.done}}_.type==="throw"&&(p="completed",u.method="throw",u.arg=_.arg)}}}function _t(c,s){var u=s.method,p=c.iterator[u];if(p===void 0)return s.delegate=null,u==="throw"&&c.iterator.return&&(s.method="return",s.arg=void 0,_t(c,s),s.method==="throw")||u!=="return"&&(s.method="throw",s.arg=new TypeError("The iterator does not provide a '"+u+"' method")),T;var m=v(p,c.iterator,s.arg);if(m.type==="throw")return s.method="throw",s.arg=m.arg,s.delegate=null,T;var h=m.arg;return h?h.done?(s[c.resultName]=h.value,s.next=c.nextLoc,s.method!=="return"&&(s.method="next",s.arg=void 0),s.delegate=null,T):h:(s.method="throw",s.arg=new TypeError("iterator result is not an object"),s.delegate=null,T)}function Hr(c){var s={tryLoc:c[0]};1 in c&&(s.catchLoc=c[1]),2 in c&&(s.finallyLoc=c[2],s.afterLoc=c[3]),this.tryEntries.push(s)}function we(c){var s=c.completion||{};s.type="normal",delete s.arg,c.completion=s}function Fe(c){this.tryEntries=[{tryLoc:"root"}],c.forEach(Hr,this),this.reset(!0)}function xe(c){if(c){var s=c[i];if(s)return s.call(c);if(typeof c.next=="function")return c;if(!isNaN(c.length)){var u=-1,p=function m(){for(;++u<c.length;)if(e.call(c,u))return m.value=c[u],m.done=!1,m;return m.value=void 0,m.done=!0,m};return p.next=p}}return{next:Rt}}function Rt(){return{value:void 0,done:!0}}return E.prototype=w,t(ae,"constructor",{value:w,configurable:!0}),t(w,"constructor",{value:E,configurable:!0}),E.displayName=d(w,l,"GeneratorFunction"),n.isGeneratorFunction=function(c){var s=typeof c=="function"&&c.constructor;return!!s&&(s===E||(s.displayName||s.name)==="GeneratorFunction")},n.mark=function(c){return Object.setPrototypeOf?Object.setPrototypeOf(c,w):(c.__proto__=w,d(c,l,"GeneratorFunction")),c.prototype=Object.create(ae),c},n.awrap=function(c){return{__await:c}},Ot(Ie.prototype),d(Ie.prototype,o,function(){return this}),n.AsyncIterator=Ie,n.async=function(c,s,u,p,m){m===void 0&&(m=Promise);var h=new Ie(f(c,s,u,p),m);return n.isGeneratorFunction(s)?h:h.next().then(function(b){return b.done?b.value:h.next()})},Ot(ae),d(ae,l,"Generator"),d(ae,i,function(){return this}),d(ae,"toString",function(){return"[object Generator]"}),n.keys=function(c){var s=Object(c),u=[];for(var p in s)u.push(p);return u.reverse(),function m(){for(;u.length;){var h=u.pop();if(h in s)return m.value=h,m.done=!1,m}return m.done=!0,m}},n.values=xe,Fe.prototype={constructor:Fe,reset:function(s){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(we),!s)for(var u in this)u.charAt(0)==="t"&&e.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=void 0)},stop:function(){this.done=!0;var s=this.tryEntries[0].completion;if(s.type==="throw")throw s.arg;return this.rval},dispatchException:function(s){if(this.done)throw s;var u=this;function p(B,W){return b.type="throw",b.arg=s,u.next=B,W&&(u.method="next",u.arg=void 0),!!W}for(var m=this.tryEntries.length-1;m>=0;--m){var h=this.tryEntries[m],b=h.completion;if(h.tryLoc==="root")return p("end");if(h.tryLoc<=this.prev){var O=e.call(h,"catchLoc"),_=e.call(h,"finallyLoc");if(O&&_){if(this.prev<h.catchLoc)return p(h.catchLoc,!0);if(this.prev<h.finallyLoc)return p(h.finallyLoc)}else if(O){if(this.prev<h.catchLoc)return p(h.catchLoc,!0)}else{if(!_)throw new Error("try statement without catch or finally");if(this.prev<h.finallyLoc)return p(h.finallyLoc)}}}},abrupt:function(s,u){for(var p=this.tryEntries.length-1;p>=0;--p){var m=this.tryEntries[p];if(m.tryLoc<=this.prev&&e.call(m,"finallyLoc")&&this.prev<m.finallyLoc){var h=m;break}}h&&(s==="break"||s==="continue")&&h.tryLoc<=u&&u<=h.finallyLoc&&(h=null);var b=h?h.completion:{};return b.type=s,b.arg=u,h?(this.method="next",this.next=h.finallyLoc,T):this.complete(b)},complete:function(s,u){if(s.type==="throw")throw s.arg;return s.type==="break"||s.type==="continue"?this.next=s.arg:s.type==="return"?(this.rval=this.arg=s.arg,this.method="return",this.next="end"):s.type==="normal"&&u&&(this.next=u),T},finish:function(s){for(var u=this.tryEntries.length-1;u>=0;--u){var p=this.tryEntries[u];if(p.finallyLoc===s)return this.complete(p.completion,p.afterLoc),we(p),T}},catch:function(s){for(var u=this.tryEntries.length-1;u>=0;--u){var p=this.tryEntries[u];if(p.tryLoc===s){var m=p.completion;if(m.type==="throw"){var h=m.arg;we(p)}return h}}throw new Error("illegal catch attempt")},delegateYield:function(s,u,p){return this.delegate={iterator:xe(s),resultName:u,nextLoc:p},this.method==="next"&&(this.arg=void 0),T}},n}k.exports=Cr,k.exports.__esModule=!0,k.exports.default=k.exports});var Ar=Y((yo,Ur)=>{var Ae=Nr()();Ur.exports=Ae;try{regeneratorRuntime=Ae}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Ae:Function("r","regeneratorRuntime = r")(Ae)}});var Ct=()=>{let n=[].slice.call(document.querySelectorAll('script[class*="optanon-category"]')),r=[].slice.call(document.querySelectorAll('*[class*="optanon-category"]'));n=Array.from(new Set(n.concat([].slice.call(document.querySelectorAll('script[class*="ot-vscat"]'))))),r=Array.from(new Set(r.concat([].slice.call(document.querySelectorAll('*[class*="ot-vscat"]'))))),Array.prototype.forEach.call(r,e=>{e.tagName!=="SCRIPT"&&e.hasAttribute("data-src")&&$r(e)}),Array.prototype.forEach.call(n,e=>{e.hasAttribute("type")&&e.getAttribute("type")==="text/plain"&&en(e)})},$r=n=>{let r=n.getAttribute("data-src");r&&(n.setAttribute("src",r),n.removeAttribute("data-src"))},en=n=>{let r=n.parentNode;if(!r){console.error("Failed to reactivate script tag. No parent node found.");return}let e=document.createElement(n.tagName);e.innerHTML=n.innerHTML;for(let t of n.attributes)t.name!=="type"?e.setAttribute(t.name,t.value):e.setAttribute("type","text/javascript");e.onload=n.onload,e.onerror=n.onerror,r.appendChild(e),r.removeChild(n)};var Nt=n=>{[...document.getElementsByClassName("atl-policy-link-container")].forEach(a=>{n.container.push(a.style.getPropertyValue("display"))}),[...document.getElementsByClassName("atl-policy-link-text")].forEach(a=>{n.linkText.push(a.style.getPropertyValue("display"))}),[...document.getElementsByClassName("atl-policy-link")].forEach(a=>{n.link.push(a.style.getPropertyValue("display"))})},Ut=(n,r)=>{let{DisplayText:e,LinkClicked:t}=n;[...document.getElementsByClassName("atl-policy-link-container")].forEach((l,d)=>{let f=r.container[d]??"";l.style.setProperty("display",Pe(f))}),[...document.getElementsByClassName("atl-policy-link-text")].forEach((l,d)=>{l.textContent=e,l.ariaLabel=e;let f=r.linkText[d]??"";l.style.setProperty("display",Pe(f))}),[...document.getElementsByClassName("atl-policy-link")].forEach((l,d)=>{l.onclick=v=>{v.preventDefault(),t()};let f=r.link[d]??"";l.style.setProperty("display",Pe(f))})},Pe=n=>n!=="none"?n:"",Ge=()=>{[...document.getElementsByClassName("atl-policy-link-container")].forEach(t=>{t.style.setProperty("display","none")}),[...document.getElementsByClassName("atl-policy-link-text")].forEach(t=>{t.style.setProperty("display","none")}),[...document.getElementsByClassName("atl-policy-link")].forEach(t=>{t.style.setProperty("display","none")})};var At="eyJhbGciOiJSUzUxMiJ9.eyJvdEp3dFZlcnNpb24iOjEsInByb2Nlc3NJZCI6ImE2NmZlNjU2LTViODEtNDI3MC05NzBhLTliZGQxMTBlMDY0NCIsInByb2Nlc3NWZXJzaW9uIjoxLCJpYXQiOiIyMDIzLTA0LTI4VDE4OjU3OjQ1LjA1IiwibW9jIjoiQVBJIiwicG9saWN5X3VyaSI6bnVsbCwic3ViIjpudWxsLCJpc3MiOm51bGwsInRlbmFudElkIjoiNDJkZWMxMGQtN2VhYy00ZjlmLWFmM2ItZTAwNzIzMDJmOGZmIiwiZGVzY3JpcHRpb24iOiJDb2xsZWN0aW9uIHBvaW50IGZvciB1c2Ugd2l0aCBDb25zZW50IEh1YiIsImNvbnNlbnRUeXBlIjoiQ09ORElUSU9OQUxUUklHR0VSIiwiYWxsb3dOb3RHaXZlbkNvbnNlbnRzIjpmYWxzZSwiZG91YmxlT3B0SW4iOmZhbHNlLCJwdXJwb3NlcyI6bnVsbCwibm90aWNlcyI6W10sImRzRGF0YUVsZW1lbnRzIjpudWxsLCJhdXRoZW50aWNhdGlvblJlcXVpcmVkIjpmYWxzZSwicmVjb25maXJtQWN0aXZlUHVycG9zZSI6ZmFsc2UsIm92ZXJyaWRlQWN0aXZlUHVycG9zZSI6dHJ1ZSwiZHluYW1pY0NvbGxlY3Rpb25Qb2ludCI6dHJ1ZSwiYWRkaXRpb25hbElkZW50aWZpZXJzIjpudWxsLCJtdWx0aXBsZUlkZW50aWZpZXJUeXBlcyI6ZmFsc2UsImVuYWJsZVBhcmVudFByaW1hcnlJZGVudGlmaWVycyI6ZmFsc2UsInBhcmVudFByaW1hcnlJZGVudGlmaWVyc1R5cGUiOm51bGwsImFkZGl0aW9uYWxQYXJlbnRJZGVudGlmaWVyVHlwZXMiOltdLCJlbmFibGVHZW9sb2NhdGlvbiI6ZmFsc2V9.DzhtjYwbr0rbq3Ee02qSaR_FNDoWe1kDNzrgnr-6V3vV_pMl9jdN1qvlj25JQVLcOFBNkHhzOCn8GQIdLeaneyc9wIoLsNah5Yu33EmbabSL0QVTiJAEVaetukqvz3e3UEFKH4-gqk8F5GGr6OQ171hwlfrTvc-ADzwCby3LgDtZW-qiCiCeVCwZf-oC-NEc45akNcyDNVzVKe4cX-FvMj2lpkcfigj8I_Rw5Ehk1VkIOJJ5cMtF_5S5mT6JNrwvKoUatjCUVHEKpjWExRKcUlK9m6lQyflQYKr3sCeE9n16HniMOsn-nO6Hm0n9FQat1Y-aF-QNoTG5sK3uGwmuD69auC7EzVbvhvqptPpRfkgldETn_rwaRL9Vcf9hAPM89zcDy_ugddM4v0CgwQq-7-2D7s-AvCN9EA_wO_TVNsDE4peUUABr4VE-BL0mBp-oMJRs8Iqt87Ugand0tA0aWT0XzjjyDQxnEwxJ1LDSbpA5Pnvsby3WManvEOnv4UTdcyDFrJCsdVa6sqmMTwjsRVFVPrw1k7LQ86BnOM5Hsm4jrvdc_IiwhSO6K6oV8SjAqk34CqhOhkkya6L70Ul5fB_YvIPoyNHc0KYeNLjhSKTdg50iT0zqefpHp1MOsC0dhIcXOWtxrlmOKN2jn5igyWJf1zeI152WeY2VI6qe4HI",Lt="https://api.atlassian.com/cookie-integrator/api/public/onetrust/jwt";var wt="https://webhooks.workato.com/webhooks/rest/88092df8-fcaa-4477-bb8f-e0574b4898b6/ot-debug";var oe="prod";var Ft="e7fcce3";var xt="https://privacyportal.onetrust.com/request/v1/consentreceipts",Pt="/gateway/api/cookie-integrator/api/onetrust/jwt";var Gt="54a6bd32-65f9-42be-a3bc-079be6623262";var Dt="b271a1cf-41c5-49b4-ab39-7153f6a0dd12";var kt="53b86afa-e70b-46c0-9beb-7bd6108f4eff",Wt="da5ec3c9-ce2b-4540-aa93-33e6b0981e00",Vt="693d19f2-0bc0-4f80-82c7-777b6b1e71b3";var nn=Pt,an=Lt,jt=async(n,r)=>{let e=n?nn:an,t={method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify(r)};try{let a=await fetch(e,t);if(!a.ok){if(a.status==401)return null;throw new Error("HTTP status code: "+a.status)}return await a.json()}catch(a){return console.error(a),null}};var on=()=>{let n=document.cookie.split(";"),r={};return n.forEach(e=>{if(e){let t=e.split("="),a=(t[0]+"").trim(),i=t.slice(1).join("=");r[a]=decodeURIComponent(i)}}),r},K=n=>on()[n],De=(n,r)=>{if(n.includes(";")||r.includes(";")){console.error("Could not set Cookie: name or value cannot contain semi-colons.");return}let e=new Date;e.setTime(e.getTime()+31536e6);let t="; expires="+e.toUTCString();document.cookie=n+"="+r+t+";path=/; Samesite=Lax;"};var Mt=(n,r)=>n.length>r?n.substring(0,r-3)+"...":n,Zt=n=>(n=n.replace(/[^a-z0-9áéíóúñü :/.,_-]/gim,""),n.trim()),Jt="prod",U={syncEnabled:!0,croScripts:!0,forceTest:!1},Bt="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",Ht=n=>`https://cdn.cookielaw.org/consent/${n}/otSDKStub.js`;var sn=xt,ln=At,un=wt,cn={1:kt,2:Dt,3:Vt,4:Wt,5:Gt},dn=()=>{let n=K("OptanonConsent"),e=new RegExp("isGpcEnabled=([0-9.]+)&*").exec(n);return!!(e&&parseInt(e[1]))},fn=n=>{let r={1:"OPT_OUT",2:"OPT_OUT",3:"OPT_OUT",4:"OPT_OUT",5:"OPT_OUT"};return n.forEach(e=>{e in r&&(r[e]="CONFIRMED")}),Object.keys(r).map(e=>{let t=parseInt(e);return{Id:cn[t],TransactionType:r[t]}})},Yt=async(n,r,e,t)=>{var d,f,v,T;let a=(f=(d=window.OneTrust).getGeolocationData)==null?void 0:f.call(d),i={FormUrl:window.location.href,DisplayedText:Mt(t,750),AtlCountryCode:(v=a==null?void 0:a.country)==null?void 0:v.toUpperCase(),AtlStateCode:(T=a==null?void 0:a.state)==null?void 0:T.toUpperCase(),IsGPC:dn().toString()},o={identifier:n,identifierType:"Cookie Unique Id",requestInformation:ln,purposes:fn(e),dsDataElements:i,customPayload:{FormUrl:"TEST",Version:Ft},test:r},l={method:"POST",body:JSON.stringify(o)};try{pn(o);let I=await fetch(sn,l);if(!I.ok)throw new Error("HTTP status code: "+I.status)}catch(I){console.error(I)}},pn=async n=>{if(window.AtlOneTrustWrapper.launchDarkly.isOneTrustLoggingEnabled())try{delete n.requestInformation;let r={method:"POST",body:JSON.stringify(n)};await fetch(un,r)}catch(r){console.log(r)}};var hn=new Set(["CO","CT","UT","VA"]),mn=new Set(["AT","AX","BE","BG","CZ","CY","DE","DK","EE","ES","FI","FR","GF","GB","GP","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MC","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SE","SI","SK","SM","YT"]),gn=n=>{var e;let r=(e=n==null?void 0:n.country)==null?void 0:e.toUpperCase();return r!==void 0&&mn.has(r)},de=n=>{var t,a;let r=(t=n==null?void 0:n.country)==null?void 0:t.toUpperCase(),e=(a=n==null?void 0:n.state)==null?void 0:a.toUpperCase();return r=="US"&&e=="CA"},Kt=n=>{var t,a;let r=(t=n==null?void 0:n.country)==null?void 0:t.toUpperCase(),e=(a=n==null?void 0:n.state)==null?void 0:a.toUpperCase();return r==="US"&&e!==void 0&&hn.has(e)},Oe=n=>gn(n)||de(n)||Kt(n),zt=n=>de(n)||Kt(n);var Xt=function(n){return n.ANALYTICS_ANONYMOUS_ID="analyticsAnonymousId",n.ATLASSIAN_ACCOUNT_ID="atlassianAccountId",n.ATLASSIAN_ORG_ID="atlassianOrgId",n.TENANT_ID="tenantId",n.TRELLO_ANONYMOUS_ID="trelloAnonymousId",n.TRELLO_USER_ID="trelloUserId",n.FF_CLIENT_ANONYMOUS_ID="ffClientAnonymousId",n}({}),_e=function(n){return n.OFF="OFF",n.FALLTHROUGH="FALLTHROUGH",n.RULE_MATCH="RULE_MATCH",n.TARGET_MATCH="TARGET_MATCH",n.PREREQUISITE_FAILED="PREREQUISITE_FAILED",n.ERROR="ERROR",n.INELIGIBLE="INELIGIBLE",n.OVERRIDE="OVERRIDE",n}({}),F=function(n){return n.CLIENT_NOT_READY="CLIENT_NOT_READY",n.FLAG_NOT_FOUND="FLAG_NOT_FOUND",n.WRONG_TYPE="WRONG_TYPE",n.VALIDATION_ERROR="VALIDATION_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.OTHER="OTHER",n}({}),fe=function(n){return n.OptIn="optInExposure",n.Automatic="autoExposure",n.HasCustomAttributes="hasCustomAttributes",n}({}),V=function(n){return n.LOCAL="local",n.DEV="dev",n.STAGING="staging",n.PROD="prod",n}({}),A=function(n){return n.CACHE="CACHE",n.FETCH="FETCH",n.CLIENT_ERROR="CLIENT_ERROR",n.SERVER_ERROR="SERVER_ERROR",n}({}),j=function(n){return n[n.DEBUG=1]="DEBUG",n[n.INFO=2]="INFO",n[n.LOG=3]="LOG",n[n.WARN=4]="WARN",n[n.ERROR=5]="ERROR",n}({});function g(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function R(n){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R(n)}function ke(n,r){if(R(n)!=="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r||"default");if(R(t)!=="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function pe(n){var r=ke(n,"string");return R(r)==="symbol"?r:String(r)}function Qt(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,pe(t.key),t)}}function y(n,r,e){return r&&Qt(n.prototype,r),e&&Qt(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var ot=ie(he());function S(n,r,e){return r=pe(r),r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}var $t=ie(he());var C=class n{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(r,e=!1){return this.onePassHasher.start().appendStr(r).end(e)}static hashAsciiStr(r,e=!1){return this.onePassHasher.start().appendAsciiStr(r).end(e)}static _hex(r){let e=n.hexChars,t=n.hexOut,a,i,o,l;for(l=0;l<4;l+=1)for(i=l*8,a=r[l],o=0;o<8;o+=2)t[i+1+o]=e.charAt(a&15),a>>>=4,t[i+0+o]=e.charAt(a&15),a>>>=4;return t.join("")}static _md5cycle(r,e){let t=r[0],a=r[1],i=r[2],o=r[3];t+=(a&i|~a&o)+e[0]-680876936|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&i)+e[1]-389564586|0,o=(o<<12|o>>>20)+t|0,i+=(o&t|~o&a)+e[2]+606105819|0,i=(i<<17|i>>>15)+o|0,a+=(i&o|~i&t)+e[3]-1044525330|0,a=(a<<22|a>>>10)+i|0,t+=(a&i|~a&o)+e[4]-176418897|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&i)+e[5]+1200080426|0,o=(o<<12|o>>>20)+t|0,i+=(o&t|~o&a)+e[6]-1473231341|0,i=(i<<17|i>>>15)+o|0,a+=(i&o|~i&t)+e[7]-45705983|0,a=(a<<22|a>>>10)+i|0,t+=(a&i|~a&o)+e[8]+1770035416|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&i)+e[9]-1958414417|0,o=(o<<12|o>>>20)+t|0,i+=(o&t|~o&a)+e[10]-42063|0,i=(i<<17|i>>>15)+o|0,a+=(i&o|~i&t)+e[11]-1990404162|0,a=(a<<22|a>>>10)+i|0,t+=(a&i|~a&o)+e[12]+1804603682|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&i)+e[13]-40341101|0,o=(o<<12|o>>>20)+t|0,i+=(o&t|~o&a)+e[14]-1502002290|0,i=(i<<17|i>>>15)+o|0,a+=(i&o|~i&t)+e[15]+1236535329|0,a=(a<<22|a>>>10)+i|0,t+=(a&o|i&~o)+e[1]-165796510|0,t=(t<<5|t>>>27)+a|0,o+=(t&i|a&~i)+e[6]-1069501632|0,o=(o<<9|o>>>23)+t|0,i+=(o&a|t&~a)+e[11]+643717713|0,i=(i<<14|i>>>18)+o|0,a+=(i&t|o&~t)+e[0]-373897302|0,a=(a<<20|a>>>12)+i|0,t+=(a&o|i&~o)+e[5]-701558691|0,t=(t<<5|t>>>27)+a|0,o+=(t&i|a&~i)+e[10]+38016083|0,o=(o<<9|o>>>23)+t|0,i+=(o&a|t&~a)+e[15]-660478335|0,i=(i<<14|i>>>18)+o|0,a+=(i&t|o&~t)+e[4]-405537848|0,a=(a<<20|a>>>12)+i|0,t+=(a&o|i&~o)+e[9]+568446438|0,t=(t<<5|t>>>27)+a|0,o+=(t&i|a&~i)+e[14]-1019803690|0,o=(o<<9|o>>>23)+t|0,i+=(o&a|t&~a)+e[3]-187363961|0,i=(i<<14|i>>>18)+o|0,a+=(i&t|o&~t)+e[8]+1163531501|0,a=(a<<20|a>>>12)+i|0,t+=(a&o|i&~o)+e[13]-1444681467|0,t=(t<<5|t>>>27)+a|0,o+=(t&i|a&~i)+e[2]-51403784|0,o=(o<<9|o>>>23)+t|0,i+=(o&a|t&~a)+e[7]+1735328473|0,i=(i<<14|i>>>18)+o|0,a+=(i&t|o&~t)+e[12]-1926607734|0,a=(a<<20|a>>>12)+i|0,t+=(a^i^o)+e[5]-378558|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^i)+e[8]-2022574463|0,o=(o<<11|o>>>21)+t|0,i+=(o^t^a)+e[11]+1839030562|0,i=(i<<16|i>>>16)+o|0,a+=(i^o^t)+e[14]-35309556|0,a=(a<<23|a>>>9)+i|0,t+=(a^i^o)+e[1]-1530992060|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^i)+e[4]+1272893353|0,o=(o<<11|o>>>21)+t|0,i+=(o^t^a)+e[7]-155497632|0,i=(i<<16|i>>>16)+o|0,a+=(i^o^t)+e[10]-1094730640|0,a=(a<<23|a>>>9)+i|0,t+=(a^i^o)+e[13]+681279174|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^i)+e[0]-358537222|0,o=(o<<11|o>>>21)+t|0,i+=(o^t^a)+e[3]-722521979|0,i=(i<<16|i>>>16)+o|0,a+=(i^o^t)+e[6]+76029189|0,a=(a<<23|a>>>9)+i|0,t+=(a^i^o)+e[9]-640364487|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^i)+e[12]-421815835|0,o=(o<<11|o>>>21)+t|0,i+=(o^t^a)+e[15]+530742520|0,i=(i<<16|i>>>16)+o|0,a+=(i^o^t)+e[2]-995338651|0,a=(a<<23|a>>>9)+i|0,t+=(i^(a|~o))+e[0]-198630844|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~i))+e[7]+1126891415|0,o=(o<<10|o>>>22)+t|0,i+=(t^(o|~a))+e[14]-1416354905|0,i=(i<<15|i>>>17)+o|0,a+=(o^(i|~t))+e[5]-57434055|0,a=(a<<21|a>>>11)+i|0,t+=(i^(a|~o))+e[12]+1700485571|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~i))+e[3]-1894986606|0,o=(o<<10|o>>>22)+t|0,i+=(t^(o|~a))+e[10]-1051523|0,i=(i<<15|i>>>17)+o|0,a+=(o^(i|~t))+e[1]-2054922799|0,a=(a<<21|a>>>11)+i|0,t+=(i^(a|~o))+e[8]+1873313359|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~i))+e[15]-30611744|0,o=(o<<10|o>>>22)+t|0,i+=(t^(o|~a))+e[6]-1560198380|0,i=(i<<15|i>>>17)+o|0,a+=(o^(i|~t))+e[13]+1309151649|0,a=(a<<21|a>>>11)+i|0,t+=(i^(a|~o))+e[4]-145523070|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~i))+e[11]-1120210379|0,o=(o<<10|o>>>22)+t|0,i+=(t^(o|~a))+e[2]+718787259|0,i=(i<<15|i>>>17)+o|0,a+=(o^(i|~t))+e[9]-343485551|0,a=(a<<21|a>>>11)+i|0,r[0]=t+r[0]|0,r[1]=a+r[1]|0,r[2]=i+r[2]|0,r[3]=o+r[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(n.stateIdentity),this}appendStr(r){let e=this._buffer8,t=this._buffer32,a=this._bufferLength,i,o;for(o=0;o<r.length;o+=1){if(i=r.charCodeAt(o),i<128)e[a++]=i;else if(i<2048)e[a++]=(i>>>6)+192,e[a++]=i&63|128;else if(i<55296||i>56319)e[a++]=(i>>>12)+224,e[a++]=i>>>6&63|128,e[a++]=i&63|128;else{if(i=(i-55296)*1024+(r.charCodeAt(++o)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[a++]=(i>>>18)+240,e[a++]=i>>>12&63|128,e[a++]=i>>>6&63|128,e[a++]=i&63|128}a>=64&&(this._dataLength+=64,n._md5cycle(this._state,t),a-=64,t[0]=t[16])}return this._bufferLength=a,this}appendAsciiStr(r){let e=this._buffer8,t=this._buffer32,a=this._bufferLength,i,o=0;for(;;){for(i=Math.min(r.length-o,64-a);i--;)e[a++]=r.charCodeAt(o++);if(a<64)break;this._dataLength+=64,n._md5cycle(this._state,t),a=0}return this._bufferLength=a,this}appendByteArray(r){let e=this._buffer8,t=this._buffer32,a=this._bufferLength,i,o=0;for(;;){for(i=Math.min(r.length-o,64-a);i--;)e[a++]=r[o++];if(a<64)break;this._dataLength+=64,n._md5cycle(this._state,t),a=0}return this._bufferLength=a,this}getState(){let r=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[r[0],r[1],r[2],r[3]]}}setState(r){let e=r.buffer,t=r.state,a=this._state,i;for(this._dataLength=r.length,this._bufferLength=r.buflen,a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],i=0;i<e.length;i+=1)this._buffer8[i]=e.charCodeAt(i)}end(r=!1){let e=this._bufferLength,t=this._buffer8,a=this._buffer32,i=(e>>2)+1;this._dataLength+=e;let o=this._dataLength*8;if(t[e]=128,t[e+1]=t[e+2]=t[e+3]=0,a.set(n.buffer32Identity.subarray(i),i),e>55&&(n._md5cycle(this._state,a),a.set(n.buffer32Identity)),o<=4294967295)a[14]=o;else{let l=o.toString(16).match(/(.*?)(.{0,8})$/);if(l===null)return;let d=parseInt(l[2],16),f=parseInt(l[1],16)||0;a[14]=d,a[15]=f}return n._md5cycle(this._state,a),r?this._state:n._hex(this._state)}};C.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);C.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);C.hexChars="0123456789abcdef";C.hexOut=[];C.onePassHasher=new C;if(C.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");function x(n){return C.hashStr((0,$t.default)(n))}function er(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,t)}return e}function tr(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?er(Object(e),!0).forEach(function(t){S(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):er(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var yn=1e3*60*60,We=function(){function n(r){g(this,n),S(this,"spamBuster",{}),S(this,"automaticExposuresEnabled",!1),S(this,"automaticExposuresPredicate",function(){return!0}),this.analyticsWebClient=r}return y(n,[{key:"sendExposureEvent",value:function(e,t,a,i){var o=t.evaluationDetail,l=t.trackingInfo,d=l===void 0?{samplingRate:0}:l,f=a?i:{},v=f?Object.keys(f).length>0:!1,T={flagKey:e,value:t.value,reason:o==null?void 0:o.reason,ruleId:o==null?void 0:o.ruleId,errorKind:o==null?void 0:o.errorKind},I=tr(tr({},f),T),E=this.shouldSendExposureEvent(I,d,a);if(E){var w="feature",re="exposed",ne="@atlassiansox/feature-flag-web-client",J=a;this.analyticsWebClient.sendOperationalEvent({actionSubject:w,action:re,attributes:T,tags:["measurement",a?fe.OptIn:fe.Automatic],source:ne,highPriority:J}),v&&this.analyticsWebClient.sendOperationalEvent({actionSubject:w,action:re,attributes:I,tags:["measurement",fe.OptIn,fe.HasCustomAttributes],source:ne,highPriority:J}),this.markExposureAsTracked(T)}}},{key:"shouldSendExposureEvent",value:function(e,t,a){if(this.hasAlreadyTrackedExposure(e))return!1;if(a)return!0;var i=t.samplingRate,o=this.automaticExposuresEnabled&&i===1&&this.automaticExposuresPredicate(e);return o}},{key:"hasAlreadyTrackedExposure",value:function(e){var t=x(e);return!(this.spamBuster[t]===void 0||this.spamBuster[t]+yn<Date.now())}},{key:"markExposureAsTracked",value:function(e){var t=x(e);this.spamBuster[t]=Date.now()}},{key:"setAutomaticExposuresEnabled",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};this.automaticExposuresEnabled=e,this.automaticExposuresPredicate=t}}]),n}();var Re="8.3.0";var vn=function(){return j.INFO},me="@atlassiansox/feature-flag-web-client@".concat(Re," -"),rr=function(){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};g(this,n),this.isEnabled=r.enabled!==void 0?r.enabled:!0,this.logger=r.logger||console,this.logLevel=r.level||vn()}return y(n,[{key:"debug",value:function(){if(this.shouldLog(j.DEBUG)){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];(e=this.logger).debug.apply(e,[me].concat(a))}}},{key:"info",value:function(){if(this.shouldLog(j.INFO)){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];(e=this.logger).info.apply(e,[me].concat(a))}}},{key:"log",value:function(){if(this.shouldLog(j.LOG)){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];(e=this.logger).log.apply(e,[me].concat(a))}}},{key:"warn",value:function(){if(this.shouldLog(j.WARN)){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];(e=this.logger).warn.apply(e,[me].concat(a))}}},{key:"error",value:function(){if(this.shouldLog(j.ERROR)){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];(e=this.logger).error.apply(e,[me].concat(a))}}},{key:"shouldLog",value:function(e){return this.isEnabled&&e>=this.logLevel}}]),n}();var Ve,z=function(n){return Ve||(Ve=new rr(n)),Ve};var P=function(n){return n.INITIALISED="INITIALISED",n.SUCCESS="SUCCESS",n.ERROR="ERROR",n}({}),nr=function(n){return n.V1="v1",n.V2="v2",n}({});var se=nr.V2;var X=function(n){return n.INITIALIZATION="initialization",n.POLLING="polling",n.RETRY="retry",n}({}),Q=function(n){return n.AVAILABLE="available",n.NOT_AVAILABLE="notAvailable",n.FULL="full",n.ERRORED="errored",n}({}),ge=function(n){return n.NEW="new",n.SAME="same",n.SWITCHED="switched",n}({});function q(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function G(n,r){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},G(n,r)}function ye(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&G(n,r)}function ve(n,r){if(r&&(R(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q(n)}function L(n){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(n)}function je(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Me(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function le(n,r,e){return Me()?le=Reflect.construct.bind():le=function(a,i,o){var l=[null];l.push.apply(l,i);var d=Function.bind.apply(a,l),f=new d;return o&&G(f,o.prototype),f},le.apply(null,arguments)}function $(n){var r=typeof Map=="function"?new Map:void 0;return $=function(t){if(t===null||!je(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(t))return r.get(t);r.set(t,a)}function a(){return le(t,arguments,L(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),G(a,t)},$(n)}function Tn(n){var r=En();return function(){var t=L(n),a;if(r){var i=L(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return ve(this,a)}}function En(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ar=function(n){ye(e,n);var r=Tn(e);function e(){var t;g(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=r.call.apply(r,[this].concat(i)),S(q(t),"number",0),t}return y(e)}($(Error));var Se="feature-flags-atl",ir="".concat(Se,".").concat(se),bn="".concat(ir,".flags"),In="".concat(ir,".last-user"),Ze="".concat(Se,".anonId"),Je="".concat(Se,".storage.support"),Be=!1,On=1e3*60*60*24*7,M=function(){function n(r,e,t,a){g(this,n),this.env=r,this.product=e,this.apiKey=t,this.user=a,this.key=this.getKey(),this.lastUserUpdateKey=this.getLastUpdatedKey()}return y(n,[{key:"updateUserContext",value:function(e){this.user=e,this.key=this.getKey(),this.lastUserUpdateKey=this.getLastUpdatedKey()}},{key:"getFlagsState",value:function(){return this.getObjectFromLocalstorage(this.key)}},{key:"getFlagsFromOldState",value:function(){var e=this.getObjectFromLocalstorage(this.lastUserUpdateKey);return e?this.getObjectFromLocalstorage(e.value):null}},{key:"setFlagsState",value:function(e){var t=this;n.setItem(this.key,JSON.stringify(e),function(){return t.setLastUpdatedPrimaryKey()})}},{key:"purgeStaleFlagState",value:function(){var e=this;try{Object.keys(window.localStorage).filter(function(t){return t.startsWith(Se)&&t!==e.key&&t!==e.lastUserUpdateKey&&t!==Ze}).forEach(function(t){var a=e.getObjectFromLocalstorage(t);a&&Date.now()-a.timestamp>=On&&n.removeItem(t)})}catch{}}},{key:"getObjectFromLocalstorage",value:function(e){var t=n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return null}}},{key:"setLastUpdatedPrimaryKey",value:function(){var e={value:this.key,timestamp:Date.now()};n.setItem(this.lastUserUpdateKey,JSON.stringify(e))}},{key:"getLastUpdatedKey",value:function(){var e={identifier:this.user.identifier};return"".concat(In,".").concat(this.env,".").concat(this.product,".").concat(x(e))}},{key:"getKey",value:function(){return"".concat(bn,".").concat(this.env,".").concat(this.product,".").concat(this.apiKey,".").concat(x(this.user))}}],[{key:"getAnonymousId",value:function(){return n.getItem(Ze)}},{key:"setAnonymousId",value:function(e){n.setItem(Ze,e)}},{key:"setItem",value:function(e,t,a){try{window.localStorage.setItem(e,t),Be=!1,a&&a()}catch(i){n.isQuotaExceeded(i)&&(Be=!0)}}},{key:"getItem",value:function(e){try{return window.localStorage.getItem(e)}catch{return null}}},{key:"removeItem",value:function(e){try{window.localStorage.removeItem(e)}catch{}}},{key:"isQuotaExceeded",value:function(e){if(e instanceof DOMException)switch(e.name){case"QUOTA_EXCEEDED_ERR":return!0;case"QuotaExceededError":return!0;case"NS_ERROR_DOM_QUOTA_REACHED":return!0;default:return!1}return e instanceof ar?e.number===-2147024882:!1}},{key:"getStorageStatus",value:function(){var e="test_value";try{if(!window.localStorage)return Q.NOT_AVAILABLE;if(Be)return Q.FULL;window.localStorage.setItem(Je,e);var t=window.localStorage.getItem(Je);return window.localStorage.removeItem(Je),t===e?Q.AVAILABLE:Q.ERRORED}catch(a){return n.isQuotaExceeded(a)?Q.FULL:Q.NOT_AVAILABLE}}}]),n}();function He(n){return{all:n=n||new Map,on:function(r,e){var t=n.get(r);t&&t.push(e)||n.set(r,[e])},off:function(r,e){var t=n.get(r);t&&t.splice(t.indexOf(e)>>>0,1)},emit:function(r,e){(n.get(r)||[]).slice().map(function(t){t(e)}),(n.get("*")||[]).slice().map(function(t){t(r,e)})}}}var Ye="flagKey.",Ke="allFlags",ze=function(){function n(){g(this,n),this.emitter=He()}return y(n,[{key:"on",value:function(e,t,a,i,o){var l=this,d=function(){return a(i(e,t,o))};return this.emitter.on(Ye+e,d),function(){return l.emitter.off(Ye+e,d)}}},{key:"onAnyFlagUpdated",value:function(e){var t=this;return this.emitter.on(Ke,e),function(){return t.emitter.off(Ke,e)}}},{key:"anyFlagUpdated",value:function(){this.emitter.emit(Ke)}},{key:"flagValueUpdated",value:function(e){this.emitter.emit(Ye+e)}},{key:"stop",value:function(){this.emitter=He()}}]),n}();var _n="flagData",Xe=function(){function n(r,e,t){g(this,n),this.apiKey=r,this.stateUpdateCallback=t,this.setupChannel(e)}return y(n,[{key:"updateUserContext",value:function(e){this.stop(),this.setupChannel(e)}},{key:"sendFeatureFlagState",value:function(e){var t;(t=this.channel)===null||t===void 0||t.postMessage(e)}},{key:"stop",value:function(){var e;(e=this.channel)===null||e===void 0||e.close()}},{key:"setupChannel",value:function(e){var t=this;try{var a=new BroadcastChannel(this.createChannelName(e));a.onmessage=function(i){var o;a.name===((o=t.channel)===null||o===void 0?void 0:o.name)&&t.stateUpdateCallback(i.data)},this.channel=a}catch{}}},{key:"createChannelName",value:function(e){return"".concat(_n,".").concat(se,".").concat(this.apiKey,".").concat(x(e))}}]),n}();function ee(n){var r=JSON.stringify(n);return JSON.parse(r)}var et=ie(he()),hr=ie(fr());function Un(n){var r={value:n.value,trackingInfo:n.trackingInfo||{samplingRate:0}};return n.reason&&(r.evaluationDetail={reason:n.reason,ruleId:n.ruleId}),r}function mr(n){var r,e={};return(r=n.featureFlagValues)===null||r===void 0||r.forEach(function(t){e[t.key]=Un(t)}),{flags:e,deletedFlags:n.deletedFlags||[],versionData:n.versionData}}function Ce(n,r){var e=(r==null?void 0:r.flags)||{},t=Object.keys(n).filter(function(i){return e[i]===void 0}),a=An(r);return{flags:e,deletedFlags:t,versionData:a}}var An=function(r){if("version"in r)return r.version;if("versionData"in r)return r.versionData};function gr(n,r){return(0,et.default)(n==null?void 0:n.value)!==(0,et.default)(r==null?void 0:r.value)}function Ln(n){switch(n){case P.INITIALISED:return F.CLIENT_NOT_READY;case P.ERROR:return F.SERVER_ERROR;case P.SUCCESS:return F.FLAG_NOT_FOUND;default:return F.OTHER}}function yr(n,r,e,t){var a;return n?R(n.value)!==R(r)?{value:r,trackingInfo:n.trackingInfo,evaluationDetail:{reason:_e.ERROR,errorKind:F.WRONG_TYPE}}:t!=null&&(a=t.oneOf)!==null&&a!==void 0&&a.length&&t.oneOf.indexOf(n.value)<0?{value:r,trackingInfo:n.trackingInfo,evaluationDetail:{reason:_e.ERROR,errorKind:F.VALIDATION_ERROR}}:ee(n):{value:r,evaluationDetail:{reason:_e.ERROR,errorKind:Ln(e)}}}function pr(n){return!n||/^\s*$/.test(n)}function wn(n){return typeof n=="function"}function vr(n,r,e,t){if(pr(n))throw new Error("apiKey is missing");if(!wn(r==null?void 0:r.sendOperationalEvent))throw new Error("analyticsWebClient.sendOperationalEvent is missing or not a function");if(!e)throw new Error("featureFlagUser is missing");if(pr(t==null?void 0:t.productKey))throw new Error("options.productKey is missing");if(Object.values(V).indexOf(t==null?void 0:t.environment)===-1)throw new Error("options.environment is missing or invalid");if(t.pollingInterval!==void 0&&t.pollingInterval!==null){var a=6e4,i=1e3;if(t.pollingInterval<=a)if(t.environment===V.PROD)t.pollingInterval=a,z().log("options.pollingInterval needs to be greater than ".concat(a));else{if(t.pollingInterval<=i)throw new Error("options.pollingInterval needs to be greater than ".concat(i));z().log("options.pollingInterval needs to be greater than ".concat(a," in Production"))}}}function tt(n){if(n==null)throw new Error("defaultValue is missing")}function Tr(){return(0,hr.default)()}function Er(n){switch(n){case 0:return"Request took too long to finish, client aborted the request.";case 400:return"Service returned bad request response code. The version data maybe malformed or out of sync with the server.";case 401:return"Service returned unauthorized response code. Ensure that the API token is valid for this environment.";case 429:return"Service rate limit exceeded.";case 500:case 502:case 503:case 504:return"Service is unavailable, status code: ".concat(n);default:return"Unsure what went wrong, status code: ".concat(n)}}function br(n){return n&&n>=500?A.SERVER_ERROR:A.CLIENT_ERROR}function Ir(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,t)}return e}function Ne(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ir(Object(e),!0).forEach(function(t){S(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ir(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var rt=function(){function n(){g(this,n)}return y(n,null,[{key:"processAnonymousUser",value:function(e){var t=e.identifier;return t?Ne(Ne({},e),{},{identifier:t}):(t={type:Xt.FF_CLIENT_ANONYMOUS_ID,value:n.generateAnonymousId()},Ne(Ne({},e),{},{isAnonymous:!0,identifier:t}))}},{key:"generateAnonymousId",value:function(){var e=M.getAnonymousId();if(e)return e;var t=Tr();return M.setAnonymousId(t),t}}]),n}();var Fn=3*1e3,co={reason:A.CLIENT_ERROR,message:"Client timed out."},fo={reason:A.CLIENT_ERROR,message:"Request took too long to finish, client aborted the request."},Ue={reason:A.CACHE},Or={reason:A.FETCH},_r=function(){function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.readyTimeoutInMilliseconds;g(this,n),this.readyTimeoutInMilliseconds=e||Fn,this.initialisePromise(),this.initialiseDefaultPromise(this.readyTimeoutInMilliseconds)}return y(n,[{key:"initialiseDefaultPromise",value:function(e){this.defaultReadyPromise=new Promise(function(t){setTimeout(function(){t({reason:A.CLIENT_ERROR,message:"Client timed out."})},e)})}},{key:"initialisePromise",value:function(){var e=this;this.readyPromise=new Promise(function(t){e.resolveReadyPromise=t})}},{key:"getPromise",value:function(){return Promise.race([this.readyPromise,this.defaultReadyPromise])}},{key:"triggerReady",value:function(e){this.resolveReadyPromise!==void 0&&(this.resolveReadyPromise(e),this.resolveReadyPromise=void 0)}},{key:"reset",value:function(){this.resolveReadyPromise===void 0&&this.initialisePromise(),this.initialiseDefaultPromise(this.readyTimeoutInMilliseconds)}}]),n}();var it=ie(he());function Rr(n,r,e,t,a,i,o){try{var l=n[i](o),d=l.value}catch(f){e(f);return}l.done?r(d):Promise.resolve(d).then(t,a)}function Ee(n){return function(){var r=this,e=arguments;return new Promise(function(t,a){var i=n.apply(r,e);function o(d){Rr(i,t,a,o,l,"next",d)}function l(d){Rr(i,t,a,o,l,"throw",d)}o(void 0)})}}var te=ie(Ar());function Pn(n){var r=Gn();return function(){var t=L(n),a;if(r){var i=L(this).constructor;a=Reflect.construct(t,arguments,i)}else a=t.apply(this,arguments);return ve(this,a)}}function Gn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ue=function(n){ye(e,n);var r=Pn(e);function e(t,a){var i;return g(this,e),i=r.call(this,"Response Error: ".concat(t)),Object.setPrototypeOf(q(i),e.prototype),i._status=t,i._body=a,i}return y(e,[{key:"status",get:function(){return this._status}},{key:"body",get:function(){return this._body}}]),e}($(Error));var Dn=2e3,kn="https://api.atlassian.com/flags",Wn="https://api.stg.atlassian.com/flags",Vn="https://api.dev.atlassian.com/flags",jn="/gateway/api/flags",at=function(){function n(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V.PROD,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;g(this,n),this.apiKey=r,this.baseUrl=n.buildBaseUrl(e,t,a)}return y(n,[{key:"fetchFeatureFlags",value:function(){var r=Ee(te.default.mark(function t(a,i,o){var l,d,f,v,T;return te.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l={apiKey:this.apiKey,identifier:a.identifier,isAnonymous:a.isAnonymous,additionalIdentifiers:a.additionalIdentifiers,customAttributes:a.custom,versionData:o,metadata:i},d=typeof AbortController<"u"?new AbortController:null,f=setTimeout(function(){return d==null?void 0:d.abort()},Dn),E.prev=3,E.next=6,fetch("".concat(this.baseUrl,"/api/").concat(se,"/frontend/featureFlagValues"),{method:"POST",headers:{"Content-Type":"application/json","X-Client-Name":i.client.name,"X-Client-Version":i.client.version,"X-Api-Key":this.apiKey},body:JSON.stringify(l),signal:d==null?void 0:d.signal});case 6:return v=E.sent,E.next=9,n.handleResponseError(v);case 9:return T=E.sent,E.abrupt("return",n.extractBody(T));case 13:return E.prev=13,E.t0=E.catch(3),E.abrupt("return",Promise.reject(E.t0));case 16:return E.prev=16,clearTimeout(f),E.finish(16);case 19:case"end":return E.stop()}},t,this,[[3,13,16,19]])}));function e(t,a,i){return r.apply(this,arguments)}return e}()}],[{key:"handleResponseError",value:function(){var r=Ee(te.default.mark(function t(a){var i;return te.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a.ok){l.next=5;break}return l.next=3,a.text();case 3:throw i=l.sent,new ue(a.status,i);case 5:return l.abrupt("return",a);case 6:case"end":return l.stop()}},t)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"extractBody",value:function(){var r=Ee(te.default.mark(function t(a){return te.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a.status!==204){o.next=2;break}return o.abrupt("return",{});case 2:return o.abrupt("return",a.text().then(function(l){return JSON.parse(l||"{}")}));case 3:case"end":return o.stop()}},t)}));function e(t){return r.apply(this,arguments)}return e}()},{key:"buildBaseUrl",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t||(a?jn:e===V.DEV||e===V.LOCAL?Vn:e===V.STAGING?Wn:kn)}}]),n}();var Lr=function(){function n(r){g(this,n),this.pollingSeconds=r.interval/1e3}return y(n,[{key:"updateClientCauseReason",value:function(e){this.clientCauseReason=e}},{key:"updateClientUserState",value:function(e){this.clientUserState=e}},{key:"get",value:function(){var e={client:{name:"feature-flag-web-client",version:Re},config:{pollingSeconds:this.pollingSeconds},state:{visibility:document.visibilityState,storage:M.getStorageStatus(),userContext:this.clientUserState,cause:this.clientCauseReason}};return e}}]),n}();function wr(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,t)}return e}function Fr(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?wr(Object(e),!0).forEach(function(t){S(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):wr(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Z={minWaitInterval:3e5,maxWaitInterval:12e5,backOffFactor:2,backOffJitter:.1,interval:3e5,tabHiddenPollingFactor:12,maxInstantRetryTimes:0},ce=Fr(Fr({},Z),{},{minWaitInterval:500,interval:500,maxInstantRetryTimes:1}),xr=function(){function n(r,e,t,a,i,o){var l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:function(){},f=arguments.length>8?arguments[8]:void 0,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:!1;g(this,n),S(this,"failureCount",0),this.logger=z(),this.user=t,this.onFeatureFlagUpdate=a,this.version=o,this.lastUpdateTimestamp=l,this.pollingConfig={minWaitInterval:(i==null?void 0:i.minWaitInterval)||Z.minWaitInterval,maxWaitInterval:(i==null?void 0:i.maxWaitInterval)||Z.maxWaitInterval,backOffFactor:(i==null?void 0:i.backOffFactor)||Z.backOffFactor,backOffJitter:(i==null?void 0:i.backOffJitter)!==void 0?i.backOffJitter:Z.backOffJitter,interval:(i==null?void 0:i.interval)||Z.interval,tabHiddenPollingFactor:(i==null?void 0:i.tabHiddenPollingFactor)||Z.tabHiddenPollingFactor,maxInstantRetryTimes:0},this.noCachePollingConfig={minWaitInterval:(f==null?void 0:f.minWaitInterval)||ce.minWaitInterval,maxWaitInterval:(f==null?void 0:f.maxWaitInterval)||ce.maxWaitInterval,backOffFactor:(f==null?void 0:f.backOffFactor)||ce.backOffFactor,backOffJitter:(f==null?void 0:f.backOffJitter)!==void 0?f.backOffJitter:ce.backOffJitter,interval:(f==null?void 0:f.interval)||ce.interval,tabHiddenPollingFactor:(i==null?void 0:i.tabHiddenPollingFactor)||Z.tabHiddenPollingFactor,maxInstantRetryTimes:(f==null?void 0:f.maxInstantRetryTimes)!==void 0?f.maxInstantRetryTimes:ce.maxInstantRetryTimes},this.onError=d,this.fetcher=new at(r,e,void 0,v),this.metadataManager=new Lr(this.pollingConfig),this.status=P.INITIALISED,this.updateMetadataOnInitialisation(),this.visibilityChangeHandler=this.visibilityChangeHandler.bind(this)}return y(n,[{key:"start",value:function(){this.stop(),this.bindVisibilityChange(),this.fetchAndReschedule()}},{key:"stop",value:function(){this.timerId&&(window.clearTimeout(this.timerId),this.timerId=void 0,this.unbindVisibilityChange())}},{key:"updateUserContext",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;this.user=e,this.version=t,this.lastUpdateTimestamp=a,this.failureCount=0,this.updateMetadataOnUserChange()}},{key:"setVersionAndTimestamp",value:function(e,t){this.version=e,this.lastUpdateTimestamp=t}},{key:"getStatus",value:function(){return this.status}},{key:"visibilityChangeHandler",value:function(){window.clearTimeout(this.timerId),this.timerId=void 0,n.isTabHidden()?this.schedule():this.fetchAndReschedule()}},{key:"bindVisibilityChange",value:function(){document.addEventListener("visibilitychange",this.visibilityChangeHandler)}},{key:"unbindVisibilityChange",value:function(){document.removeEventListener("visibilitychange",this.visibilityChangeHandler)}},{key:"schedule",value:function(){var e=this;this.timerId=window.setTimeout(function(){e.fetchAndReschedule()},this.calculateInterval())}},{key:"fetchAndReschedule",value:function(){var e=this,t=(0,it.default)(this.user);this.isFetchRequired()?this.fetcher.fetchFeatureFlags(this.user,this.metadataManager.get(),this.version).then(function(a){t===(0,it.default)(e.user)&&(e.failureCount=0,e.onFeatureFlagUpdate(mr(a)),e.schedule(),e.status=P.SUCCESS),e.updateMetadataOnRequestComplete()}).catch(function(a){if(a instanceof ue&&a.status===401){var i="Feature flag service returned ".concat(a.status,', "').concat(a.body,'". This request will not be retried until the user data has been changed.');e.logger.error(i),e.onError(a.status,a.body)}else if(a instanceof ue&&a.status===400)if(e.version)e.failureCount+=1,e.failureCount>e.getPollingConfig().maxInstantRetryTimes&&e.onError(a.status,a.body),e.logger.error("Feature flag service returned ".concat(a.status,', "').concat(a.body,'". Clear version data and retry.')),e.setVersionAndTimestamp(void 0,0),e.schedule();else{var o="Feature flag service returned ".concat(a.status,', "').concat(a.body,'". This request will not be retried until the user data has been changed.');e.logger.error(o),e.onError(a.status,a.body)}else a.name==="AbortError"?(e.failureCount+=1,e.failureCount>e.getPollingConfig().maxInstantRetryTimes&&e.onError(0),e.schedule()):(e.failureCount+=1,e.failureCount>e.getPollingConfig().maxInstantRetryTimes&&(a instanceof ue?e.onError(a.status,a.body):e.onError()),e.schedule());e.status=P.ERROR,e.updateMetadataOnRequestComplete()}):(this.schedule(),this.status=P.SUCCESS)}},{key:"isFetchRequired",value:function(){return Date.now()-this.getPollingConfig().interval>=this.lastUpdateTimestamp}},{key:"updateMetadataOnUserChange",value:function(){this.metadataManager.updateClientCauseReason(this.isFetchRequired()?X.INITIALIZATION:X.POLLING),this.metadataManager.updateClientUserState(ge.SWITCHED)}},{key:"updateMetadataOnInitialisation",value:function(){this.metadataManager.updateClientCauseReason(this.isFetchRequired()?X.INITIALIZATION:X.POLLING),this.metadataManager.updateClientUserState(this.lastUpdateTimestamp===0?ge.NEW:ge.SAME)}},{key:"updateMetadataOnRequestComplete",value:function(){this.failureCount?this.metadataManager.updateClientCauseReason(X.RETRY):(this.metadataManager.updateClientCauseReason(X.POLLING),this.metadataManager.updateClientUserState(ge.SAME))}},{key:"calculateInterval",value:function(){var e=this.getPollingConfig(),t=e.interval,a=e.tabHiddenPollingFactor,i=e.minWaitInterval,o=e.maxWaitInterval,l=e.backOffFactor,d=e.backOffJitter,f=e.maxInstantRetryTimes;if(f!==void 0&&f!==0&&f>=this.failureCount)return 0;if(this.failureCount===0)return n.isTabHidden()?t*a:t;var v=i*Math.pow(l,this.failureCount-1);if(d){var T=Math.random(),I=Math.floor(T*d*v);Math.floor(T*10)<5?v-=I:v+=I}return Number(Math.min(v,o))}},{key:"getPollingConfig",value:function(){return this.version===void 0&&this.lastUpdateTimestamp===0?this.noCachePollingConfig:this.pollingConfig}}],[{key:"isTabHidden",value:function(){return document.visibilityState==="hidden"}}]),n}();var Mn=1e4,st=function(){function n(r,e,t,a){var i=this;g(this,n),z(a==null?void 0:a.loggerOptions),vr(r,e,t,a);var o=ee(t),l=rt.processAnonymousUser(o);this.featureFlagUpdateBroadcastHandler=this.featureFlagUpdateBroadcastHandler.bind(this),this.featureFlagUpdateHttpHandler=this.featureFlagUpdateHttpHandler.bind(this),this.featureFlagUpdateFailedHandler=this.featureFlagUpdateFailedHandler.bind(this),this.readyResolver=new _r({readyTimeoutInMilliseconds:a.readyTimeoutInMilliseconds}),this.exposureEvents=new We(e),this.storage=new M(a.environment,a.productKey,r,l),this.broadcast=new Xe(r,l,this.featureFlagUpdateBroadcastHandler),this.restoreFlagStateFromStorage(),this.userData=l,this.refresh=new xr(r,a.environment,this.userData,this.featureFlagUpdateHttpHandler,{interval:a.pollingInterval},this.dataVersion,this.lastUpdatedTimestamp,this.featureFlagUpdateFailedHandler,{},a.useGatewayURL),this.refresh.start(),this.subscriptions=new ze,setTimeout(function(){return i.storage.purgeStaleFlagState()},Mn)}return y(n,[{key:"ready",value:function(){return this.readyResolver.getPromise()}},{key:"getFlagValue",value:function(e,t,a){var i=this.getFlagDetails(e,t,a);return i.value}},{key:"getFlagDetails",value:function(e,t,a){tt(t);var i=this.flags[e],o=yr(i,t,this.refresh.getStatus(),a),l=(a==null?void 0:a.shouldSendExposureEvent)!==!1&&!this.shouldIgnoreExposureForMissingFlag(e,o);if(l){var d=(a==null?void 0:a.shouldSendExposureEvent)===!0;this.exposureEvents.sendExposureEvent(e,o,d,a==null?void 0:a.exposureData)}return o}},{key:"shouldIgnoreExposureForMissingFlag",value:function(e,t){var a;return!(((a=t.evaluationDetail)===null||a===void 0?void 0:a.errorKind)!==F.FLAG_NOT_FOUND||!e.startsWith("platform."))}},{key:"getFlags",value:function(){return ee(this.flags)}},{key:"on",value:function(e,t,a,i){return tt(t),this.subscriptions.on(e,t,a,this.getFlagValue.bind(this),i)}},{key:"onAnyFlagUpdated",value:function(e){return this.subscriptions.onAnyFlagUpdated(e)}},{key:"updateFeatureFlagUser",value:function(e){if(!e)throw new Error("featureFlagUser is missing");var t=ee(e),a=rt.processAnonymousUser(t);if((0,ot.default)(this.userData)===(0,ot.default)(a))return this.ready();this.readyResolver.reset(),this.userData=a,this.storage.updateUserContext(a);var i=this.storage.getFlagsState();if(i){var o=this.updateInMemoryFlags(Ce(this.flags,i));this.sendSubscriptionUpdates(o),this.readyResolver.triggerReady(Ue)}return this.lastUpdatedTimestamp=(i==null?void 0:i.timestamp)||0,this.dataVersion=i==null?void 0:i.version,this.refresh.stop(),this.refresh.updateUserContext(a,this.dataVersion,this.lastUpdatedTimestamp),this.refresh.start(),this.broadcast.updateUserContext(a),this.ready()}},{key:"addFlag",value:function(e,t){this.flags[e]=t}},{key:"destroy",value:function(){this.refresh.stop(),this.subscriptions.stop(),this.broadcast.stop(),this.readyResolver.triggerReady({reason:A.CLIENT_ERROR,message:"Client got destroyed."})}},{key:"setAutomaticExposuresEnabled",value:function(e,t){this.exposureEvents.setAutomaticExposuresEnabled(e,t)}},{key:"restoreFlagStateFromStorage",value:function(){var e=this.storage.getFlagsState();if(this.flags=(e==null?void 0:e.flags)||{},this.lastUpdatedTimestamp=(e==null?void 0:e.timestamp)||0,this.dataVersion=e==null?void 0:e.version,e!=null)this.readyResolver.triggerReady(Ue);else{var t=this.storage.getFlagsFromOldState();t&&(this.flags=t.flags,this.readyResolver.triggerReady(Ue))}}},{key:"getCurrentFeatureFlagState",value:function(){return{timestamp:this.lastUpdatedTimestamp,version:this.dataVersion,flags:this.flags}}},{key:"featureFlagUpdateFailedHandler",value:function(e,t){this.readyResolver.triggerReady({reason:br(e),message:Er(e),serverResponse:t})}},{key:"featureFlagUpdateHttpHandler",value:function(e){this.dataVersion?this.processFeatureFlagUpdate(e):this.processFeatureFlagUpdate(Ce(this.flags,e)),this.broadcast.sendFeatureFlagState(this.getCurrentFeatureFlagState())}},{key:"featureFlagUpdateBroadcastHandler",value:function(e){e.timestamp<this.lastUpdatedTimestamp||this.processFeatureFlagUpdate(Ce(this.flags,e))}},{key:"processFeatureFlagUpdate",value:function(e){this.lastUpdatedTimestamp=Date.now(),this.dataVersion=e.versionData||this.dataVersion;var t=this.updateInMemoryFlags(e);this.sendSubscriptionUpdates(t),this.refresh.setVersionAndTimestamp(this.dataVersion,this.lastUpdatedTimestamp),this.storage.setFlagsState(this.getCurrentFeatureFlagState()),this.readyResolver.triggerReady(Or)}},{key:"updateInMemoryFlags",value:function(e){var t,a=this,i=[];return(t=e.deletedFlags)===null||t===void 0||t.forEach(function(o){o in a.flags&&(delete a.flags[o],i.push(o))}),Object.keys(e.flags).forEach(function(o){gr(a.flags[o],e.flags[o])&&i.push(o),a.flags[o]=e.flags[o]}),i}},{key:"sendSubscriptionUpdates",value:function(e){var t=this;e.length>0&&(this.subscriptions.anyFlagUpdated(),e.forEach(function(a){return t.subscriptions.flagValueUpdated(a)}))}}]),n}();var lt=function(){function n(r,e,t,a){g(this,n),this.client=new st(r,e,t,a)}return y(n,[{key:"ready",value:function(){return this.client.ready()}},{key:"setAutomaticExposuresEnabled",value:function(e,t){this.client.setAutomaticExposuresEnabled(e,t)}},{key:"getFlagValue",value:function(e,t,a){return this.client.getFlagValue(e,t,a)}},{key:"getFlagDetails",value:function(e,t,a){return this.client.getFlagDetails(e,t,a)}},{key:"getFlags",value:function(){return this.client.getFlags()}},{key:"on",value:function(e,t,a,i){return this.client.on(e,t,a,i)}},{key:"onAnyFlagUpdated",value:function(e){return this.client.onAnyFlagUpdated(e)}},{key:"updateFeatureFlagUser",value:function(e){return this.client.updateFeatureFlagUser(e)}},{key:"destroy",value:function(){this.client.destroy()}}]),n}();var ut={STAGING:"744b1a6b-3f8b-4ee6-b8b5-3b311e79524c",PROD:"9d8b4cb4-a470-473b-bfc5-ba36ad892acd",FLAG:"ace-onetrust-settings"},ct={STAGING:"466011de-0fac-4b8c-b7ab-b15cfdb9bef3",PROD:"ed42d30f-c9f0-408c-b65a-cd77205ecdf5",FLAG:"wac-onetrust-settings"},dt={STAGING:"b323307b-39f1-4241-8699-897d2d7ed2bd",PROD:"9cf1b0a8-9eed-4564-bbcf-588e96662537",FLAG:"bitbucket-onetrust-settings"},ft={STAGING:"f9f32c51-6767-4670-974b-4ab758049964",PROD:"336ea4c3-54ae-40f0-9331-b4500ffed1ee",FLAG:"community-onetrust-settings"},pt={STAGING:"1dbc70f9-3a8f-4ebd-9bab-486705ea38ce",PROD:"3ee28ebb-ee73-4de6-a1a6-3f348e948e09",FLAG:"dac-onetrust-settings"},ht={STAGING:"e5f54e57-b895-43e3-923c-88def08c2b0d",PROD:"a701007b-49a6-4175-945b-676c58f5e1f",FLAG:"mpac-onetrust-settings"},mt={STAGING:"aa318e7c-e263-40b2-9f51-853f1b13d6f0",PROD:"5ea04397-e128-46cd-8e1d-f852d600f177",FLAG:"simplify-onetrust-settings"},gt={STAGING:"7355e3af-fd18-41be-9877-a1bf821bbc6b",PROD:"af82a9d4-83df-4a5f-8a7c-96215a13864f",FLAG:"sourcetreeapp-onetrust-settings"},yt={STAGING:"5af14404-f7c0-431d-bf13-f6b1e9d6a947",PROD:"266b339b-197a-46d0-a605-808d1b1feb41",FLAG:"sac-onetrust-settings"},vt={STAGING:"dc680e5f-1f51-48c1-8bd3-d6db0aeece4a",PROD:"dcb287ca-43c0-462c-a090-46b2debf69e2",FLAG:"trello-onetrust-settings"},Tt={STAGING:"86e193b0-3cbf-4609-a8cc-4093033b42e9",PROD:"c3705a00-89d6-4227-b78f-36d7fa5d0c04",FLAG:"uac-onetrust-settings"},Pr=[ut,ct,dt,ft,pt,ht,mt,gt,yt,vt,Tt];var Et=class{constructor(){this.ACE_ONETRUST_SETTINGS=null;this.WAC_ONETRUST_SETTINGS=null;this.BITBUCKET_ONETRUST_SETTINGS=null;this.COMMUNITY_ONETRUST_SETTINGS=null;this.DAC_ONETRUST_SETTINGS=null;this.MPAC_ONETRUST_SETTINGS=null;this.SIMPLIFY_ONETRUST_SETTINGS=null;this.SOURCETREEAPP_ONETRUST_SETTINGS=null;this.SAC_ONETRUST_SETTINGS=null;this.TRELLO_ONETRUST_SETTINGS=null;this.UAC_ONETRUST_SETTINGS=null;this.ONETRUST_LOGGING=!1;this.ATL_ONETRUST_WRAPPER_VERSION="latest"}getOneTrustSettings(r){let e=oe===Jt,t=null;return Pr.forEach(a=>{if(e&&a.PROD==r||!e&&a.STAGING==r){let i=a.FLAG.toUpperCase().replace(/-/g,"_");t=this[i]}}),t}isOneTrustLoggingEnabled(){return this.ONETRUST_LOGGING}getWrapperVersion(){return this.ATL_ONETRUST_WRAPPER_VERSION}initFlags(r){this.ACE_ONETRUST_SETTINGS=r.getFlagValue(ut.FLAG,U),this.WAC_ONETRUST_SETTINGS=r.getFlagValue(ct.FLAG,U),this.BITBUCKET_ONETRUST_SETTINGS=r.getFlagValue(dt.FLAG,U),this.COMMUNITY_ONETRUST_SETTINGS=r.getFlagValue(ft.FLAG,U),this.DAC_ONETRUST_SETTINGS=r.getFlagValue(pt.FLAG,U),this.MPAC_ONETRUST_SETTINGS=r.getFlagValue(ht.FLAG,U),this.SIMPLIFY_ONETRUST_SETTINGS=r.getFlagValue(mt.FLAG,U),this.SOURCETREEAPP_ONETRUST_SETTINGS=r.getFlagValue(gt.FLAG,U),this.SAC_ONETRUST_SETTINGS=r.getFlagValue(yt.FLAG,U),this.TRELLO_ONETRUST_SETTINGS=r.getFlagValue(vt.FLAG,U),this.UAC_ONETRUST_SETTINGS=r.getFlagValue(Tt.FLAG,U),this.ONETRUST_LOGGING=r.getFlagValue("onetrust-logging",!1),this.ATL_ONETRUST_WRAPPER_VERSION=r.getFlagValue("atl-onetrust-wrapper-version","latest")}getFFApiKey(){let r={local:"406aeb9f-6377-4f53-9b0c-eee17ec4eba4",test:"406aeb9f-6377-4f53-9b0c-eee17ec4eba4",dev:"406aeb9f-6377-4f53-9b0c-eee17ec4eba4",staging:"7404fe5e-4cf2-4e54-9e89-56e811e1d26a",prod:"b40ea955-3df9-42f8-ad6d-ba64153c20e7"};if(Object.prototype.hasOwnProperty.call(r,oe))return r[oe];throw Error(`Cannot find API Key for provided environment: ${oe}`)}getClient(){return new lt(this.getFFApiKey(),{sendOperationalEvent:()=>{}},{isAnonymous:!0},{productKey:"OneTrust Wrapper",environment:oe})}async initLD(){try{let r=this.getClient();await r.ready(),this.initFlags(r)}catch(r){console.error(r)}}},Gr=Et;var Dr={POLICY_LINK:{en:"Your Privacy Choices",de:"Ihre Datenschutzoptionen",es:"Tus opciones de privacidad",fr:"Vos choix en mati\xE8re de confidentialit\xE9",hu:"Adatv\xE9delmi lehet\u0151s\xE9geid",it:"Preferenze sulla privacy",ja:"\u3042\u306A\u305F\u306E\u30D7\u30E9\u30A4\u30D0\u30B7\u30FC\u8A2D\u5B9A",ko:"\uAC1C\uC778 \uC815\uBCF4 \uBCF4\uD638 \uC120\uD0DD",nl:"Je privacyvoorkeuren",pl:"Twoje ustawienia prywatno\u015Bci",pt:"Op\xE7\xF5es de privacidade",ru:"\u0412\u0430\u0448\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A\u043E\u043D\u0444\u0438\u0434\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438",zh:"\u60A8\u7684\u9690\u79C1\u9009\u62E9",default:"Your Privacy Choices"}};function kr(n,r){return Dr[n][r]??Dr[n].default}var bt={navigateToCaliforniaPrivacyPolicy:()=>window.location.href="https://www.atlassian.com/legal/privacy-policy#additional-disclosures-for-ca-residents",openOneTrust:()=>{var n,r;return(r=(n=window.OneTrust).ToggleInfoDisplay)==null?void 0:r.call(n)},noOp:()=>{}},Le=class n{constructor(r,e="",t=bt.noOp){this.ShowLink=r,this.DisplayText=e,this.LinkClicked=t}static for(r,e){return!e||!Oe(e)?new n(!1):new n(!0,this.determineDisplayText(r,e),this.determineLinkClickHandler(e))}static determineDisplayText(r,e){return de(e)?"Your California Privacy Choices":kr("POLICY_LINK",r)}static determineLinkClickHandler(r){return de(r)?bt.navigateToCaliforniaPrivacyPolicy:bt.openOneTrust}};var be="_otPreferencesSynced",Zn="OptanonAlertBoxClosed",It=class{constructor(r,e,t,a){this.loggedIn=!1;this.eventsAdded=!1;this.userId="";this.guid="";this.optanonWrapperCalled=!1;this.updatePolicyLinksCalled=!1;this.geofeedOptions={};this.policyLinkDisplays={container:[],link:[],linkText:[]};this.launchDarkly=new Gr;this.dataTest=e,this.dataDomain=this.dataTest?`${r}-test`:r,this.guid=r,this.dataGeofence=t,this.dataSync=a??!1}async loadOneTrust(){window.OneTrust={...window.OneTrust,dataSubjectParams:{isAnonymous:!0}};let r=await this.getOnetrustSettings();if(r&&(!this.dataTest&&r.forceTest&&(this.dataTest=!0,this.dataDomain=`${this.dataDomain}-test`),this.dataSync&&!r.syncEnabled&&(this.dataSync=!1)),!this.dataSync){r&&!r.croScripts?this.addOneTrust(Bt):this.addOneTrust();return}this.dataGeofence?this.geofenceCheck():this.initializeOneTrustSession()}async getOnetrustSettings(){return await this.launchDarkly.initLD(),this.launchDarkly.getOneTrustSettings(this.guid)}getPolicyLinkData(r){var t,a;let e=(a=(t=window.OneTrust).getGeolocationData)==null?void 0:a.call(t);return Le.for(r,e)}updatePolicyLinks(){let e=document.documentElement.lang.split("-")[0]??"en",t=this.getPolicyLinkData(e);this.updatePolicyLinksCalled||(Nt(this.policyLinkDisplays),this.updatePolicyLinksCalled=!0),t.ShowLink?Ut(t,this.policyLinkDisplays):Ge()}addOneTrustScriptToHead(r){let e=document.createElement("script");e.src=r,e.type="text/javascript",e.dataset.domainScript=this.dataDomain,e.dataset.testId="onetrust-script",document.head.append(e)}addOneTrust(r=Ht(this.dataDomain)){this.addOneTrustScriptToHead(r),this.setupOptanonWrapper()}geofeedWrapper(r){return e=>{r.geofeedOptions=e,Oe(e)?r.initializeOneTrustSession():(Ge(),Ct())}}geofenceCheck(){window.geofeed=this.geofeedWrapper(this);let r=document.createElement("script");r.src="https://geolocation.onetrust.com/cookieconsentpub/v1/geo/location/geofeed",r.type="text/javascript",r.dataset.testId="geofence-script",r.onerror=()=>this.addOneTrust(),document.head.appendChild(r)}async initializeOneTrustSession(){let r={},e;if(window.OTWrapperGetIdentifier){let a=window.OTWrapperGetIdentifier();if(!a){this.loggedIn=!1,this.addOneTrust();return}e=!1,r.id=a}else e=!0;let t=await jt(e,r);if(t){let{id:a,jwt:i}=t;window.OneTrust={...window.OneTrust,dataSubjectParams:{id:a,isAnonymous:!1,token:i}},this.loggedIn=!0,this.userId=a,this.addOneTrust()}else this.loggedIn=!1,this.addOneTrust()}setupOptanonWrapper(){window.OptanonWrapper=()=>{!this.loggedIn&&K(be)!=""&&De(be,""),window.OnetrustActiveGroups&&(this.optanonWrapperCalled||this.updatePolicyLinks(),this.loggedIn&&(!this.optanonWrapperCalled&&K(Zn)&&K(be)!=this.userId&&this.sendConsentToCCP(0),this.eventsAdded||(this.setupEventListeners(),this.eventsAdded=!0)),this.optanonWrapperCalled=!0)}}setupEventListeners(){let r=document.getElementById("onetrust-accept-btn-handler"),e=document.getElementById("onetrust-reject-all-handler"),t=document.querySelectorAll(".banner-close-button")[0],a=document.getElementById("accept-recommended-btn-handler"),i=document.getElementsByClassName("ot-pc-refuse-all-handler")[0],o=document.getElementsByClassName("save-preference-btn-handler")[0];r==null||r.addEventListener("click",()=>{this.sendConsentToCCP(1)}),e==null||e.addEventListener("click",()=>{this.sendConsentToCCP(1)}),t==null||t.addEventListener("click",()=>{this.sendConsentToCCP(1)}),a==null||a.addEventListener("click",()=>{this.sendConsentToCCP(2)}),i==null||i.addEventListener("click",()=>{this.sendConsentToCCP(2)}),o==null||o.addEventListener("click",()=>{this.sendConsentToCCP(2)})}sendConsentToCCP(r){var e,t,a;if(zt((t=(e=window.OneTrust).getGeolocationData)==null?void 0:t.call(e))){let i=this.getDisplayedText(r),o=(((a=window.OnetrustActiveGroups)==null?void 0:a.split(","))??[]).filter(l=>l!="");Yt(this.userId,this.dataTest,o,i),K(be)!=this.userId&&De(be,this.userId)}}getDisplayedText(r){var t,a;let e;if(r===0)e="Login Preference Sync";else if(r===1)e=(a=(t=window.OneTrust).GetDomainData)==null?void 0:a.call(t).AlertNoticeText;else if(r===2){e="";let i=l=>{var d,f;return(f=(d=window.OneTrust).GetDomainData)==null?void 0:f.call(d).Groups.find(v=>v.CustomGroupId===l)},o=i("4");if(o){let l=i(o.Parent);l&&(e+=l.GroupName+". "),e+=o.GroupName+". "+o.GroupDescription}}return e=Zt(e??"N/A"),e}};var Wr=It;window.OneTrust=window.OneTrust||{};var jr,Vr=(jr=document.currentScript)==null?void 0:jr.dataset.domain,Mr,Zr,Jr;Vr?(window.AtlOneTrustWrapper=new Wr(Vr,((Mr=document.currentScript)==null?void 0:Mr.dataset.test)=="true",((Zr=document.currentScript)==null?void 0:Zr.dataset.geofence)=="true",(Jr=document.currentScript)!=null&&Jr.dataset.sync?document.currentScript.dataset.sync=="true":void 0),window.AtlOneTrustWrapper.loadOneTrust()):console.error("data-domain attribute is not set on the atl-onetrust-wrapper script. Unable to load OneTrust.");})();
/*! Bundled license information:

@babel/runtime/helpers/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/
